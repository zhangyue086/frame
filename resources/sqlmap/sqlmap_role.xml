<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="role">

	<resultMap type="com.zline.zlogistics.biz.dal.entity.Role"
		id="roleResult">
		<id column="role_id" property="roleId" />
		<result column="role_name" property="roleName" />
		<result column="role_description" property="roleDescription" />
		<result column="createTime" property="createTime" />
		<result column="createId" property="createId" />
		<result column="lastUpdateTime" property="lastUpdateTime" />
		<result column="lastUpdateId" property="lastUpdateId" />
		<result column="isDeleted" property="isDeleted" />
	</resultMap>

	<select id="selectRoleByRoleName" parameterType="com.zline.zlogistics.biz.dal.entity.Role"
		resultType="com.zline.zlogistics.biz.dal.entity.Role">
		SELECT
		t.role_id AS roleId,
		t.role_name AS roleName,
		t.role_description AS roleDescription,
		t.create_time as createTime,
		t.create_id AS createId,
		t.last_update_time AS lastUpdateTime,
		t.last_update_id AS lastUpdateId,
		t.is_deleted AS isDeleted
		FROM zlogistics.role t
		WHERE t.is_deleted = 0
		AND t.role_name = #{roleName}
	</select>

	<select id="findById" parameterType="long" resultMap="roleResult">
		SELECT
		t.role_id AS roleId,
		t.role_name AS roleName,
		t.role_description AS roleDescription,
		t.create_time as createTime,
		t.create_id AS createId,
		t.last_update_time AS lastUpdateTime,
		t.last_update_id AS lastUpdateId,
		t.is_deleted AS isDeleted
		FROM zlogistics.role t
		WHERE t.is_deleted = 0
		AND t.role_id = #{roleId}
	</select>

	<insert id="save" parameterType="com.zline.zlogistics.biz.dal.entity.Role"
		useGeneratedKeys="true" keyProperty="roleId">
		insert into zlogistics.role(
		role_id,
		role_name,
		role_description,
		create_time,
		create_id,
		last_update_time,
		last_update_id,
		is_deleted
		)values(
		#{roleId},
		#{roleName},
		#{roleDescription},
		now(),
		0,
		now(),
		0,
		0
		)
	</insert>

	<select id="queryList" parameterType="com.zline.zlogistics.biz.dal.entity.Role"
		resultMap="roleResult">
		SELECT
		t.role_id AS roleId,
		t.role_name AS roleName,
		t.role_description AS roleDescription,
		t.create_time as createTime,
		t.create_id AS createId,
		t.last_update_time AS lastUpdateTime,
		t.last_update_id AS lastUpdateId,
		t.is_deleted AS isDeleted
		from zlogistics.role t
		<trim prefix="where" prefixOverrides="and\or">
			t.is_deleted = 0
			<if test="roleName != null and roleName != ''">
				and t.role_name like concat('%',#{roleName},'%')
			</if>
		</trim>
		<if test="firstRow != null">
			limit #{firstRow},#{pageRows}
		</if>
	</select>

	<select id="queryListCount" parameterType="com.zline.zlogistics.biz.dal.entity.Role"
		resultType="int">
		SELECT
		count(*)
		from zlogistics.role t
		<trim prefix="where" prefixOverrides="and\or">
			t.is_deleted = 0
			<if test="roleName != null and roleName != ''">
				and t.role_name like concat('%',#{roleName},'%')
			</if>
		</trim>
		<if test="firstRow != null">
			limit #{firstRow},#{pageRows}
		</if>
	</select>

	<update id="update" parameterType="com.zline.zlogistics.biz.dal.entity.Role">
		update zlogistics.role
		<trim prefix="set" prefixOverrides=",">
			<if test="roleName != null   and roleName != ''">
				role_name = #{roleName}
			</if>
			<if test="roleDescription != null   and roleDescription != ''">
				,role_description = #{roleDescription}
			</if>
			
			<if test="isDeleted != null   and isDeleted != '' ">
				,is_deleted = #{isDeleted}
			</if>
		</trim>
		where role_id = #{roleId}
	</update>


</mapper>